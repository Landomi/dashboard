(this["webpackJsonpcelestial-dashboard-frontend"]=this["webpackJsonpcelestial-dashboard-frontend"]||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){},236:function(e,t,n){},250:function(e,t){},252:function(e,t){},254:function(e,t){},258:function(e,t){},285:function(e,t){},287:function(e,t){},296:function(e,t){},298:function(e,t){},308:function(e,t){},310:function(e,t){},428:function(e,t){},430:function(e,t){},437:function(e,t){},438:function(e,t){},531:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(220),s=n.n(c),i=(n(233),n(17)),u=(n(234),n(221)),l=n.n(u),o=n(50),d=n(22),j=n(90),b=n(34),h=Object(a.createContext)(null),m=Object(a.createContext)(null);var p=n(21),f=n.n(p),x=n(8),O=n(75),v=(n(236),n(222)),y=n.n(v),C=n(63),g=n.n(C),w=n(224),k=n(40),A=n(32),N=n(92),T=n(226),B=n(225),S=n(0),I=4902,M="0x42";function E(e){return _.apply(this,arguments)}function _(){return(_=Object(O.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.request({method:"wallet_switchEthereumChain",params:[{chainId:M}]});case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),n=e.t0,(a=n.code)===I){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function D(){return(D=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(!(n=e.sent)||n===I){e.next=5;break}return e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,t.request({method:"wallet_addEthereumChain",params:[{chainId:M,chainName:"OKExChain Mainnet",nativeCurrency:{name:"OKT",symbol:"OKT",decimals:18},rpcUrls:["https://exchainrpc.okex.org"],blockExplorerUrls:["https://www.oklink.com/okexchain"]}]});case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(5),e.abrupt("return",!1);case 13:return e.next=15,E(t);case 15:return e.abrupt("return",!e.sent);case 16:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function P(e){try{var t=BigInt(e);if(String(t)===e&&t>0)return t}catch(n){}return null}function q(e,t){""!==e&&null===P(e)||t(e)}var F=function e(t,n){Object(x.a)(this,e),this.address=void 0,this.amount=void 0,this.address=t,this.amount=n};var z=[{id:0,name:"Celt",address:"0x5Ab622494AB7C5e81911558c9552DBd517F403fb",decimal:18},{id:1,name:"Crystal",address:"0xBD87c06D865a3717A16041aCD8d33922e60E85CE",decimal:18},{id:2,name:"CeltChest",address:"0x777c5a7152F999B4bBC26295C65a0ACb066f75e9",decimal:0}],K=[{inputs:[{internalType:"address",name:"erc20Token",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"airDropBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20Token",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],name:"airDropIndividual",outputs:[],stateMutability:"nonpayable",type:"function"}],Y=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function J(e,t,n,a,r,c){if(!n)return Promise.resolve();var s=z[t].address;return new e.eth.Contract(Y,s).methods.approve(a,r*c).send({from:n})}var U="0x074101c52ea69D66577057ECA07147bcF7B3f057";function V(){}function H(e,t,n,a,r,c,s,i){if(!n||!a)return Promise.resolve();var u=z[t].address,l=new e.eth.Contract(K,U),o=Array.from(a.filter((function(e){return null===e.amount})),(function(e){return e.address})),d=Array.from(a.filter((function(e){return null!==e.amount})),(function(e){return e.address})),j=Array.from(a.filter((function(e){return null!==e.amount})),(function(e){return e.amount})),b=[],h=0;if(0!==o.length)for(var m=function(e){var t=o.slice(e,e+i);b.push(l.methods.airDropBatch(u,t,r*c).send({from:n}).then((function(){h+=t.length,s(h)})))},p=0;p<o.length;p+=i)m(p);if(0!==d.length)for(var f=function(e){var t=d.slice(e,e+i),a=j.slice(e,e+i).map((function(e){return g()(e),e*c}));b.push(l.methods.airDropIndividual(u,t,a).send({from:n}).then((function(){h+=t.length,s(h)})))},x=0;x<d.length;x+=i)f(x);return Promise.all(b).then(V)}function L(){var e=Object(a.useContext)(h);g()(e);var t,n=new y.a(e),r=Object(a.useContext)(m),c=Object(a.useState)(!1),s=Object(i.a)(c,2),u=s[0],l=s[1],p=Object(a.useState)(0),x=Object(i.a)(p,2),v=x[0],C=x[1],I=Object(a.useState)(BigInt(0)),M=Object(i.a)(I,2),E=M[0],_=M[1],K=Object(a.useState)(""),L=Object(i.a)(K,2),W=L[0],G=L[1],Q=Object(a.useState)(""),R=Object(i.a)(Q,2),X=R[0],Z=R[1],$=Object(a.useState)("200"),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),re=Object(i.a)(ae,2),ce=re[0],se=re[1],ie=Object(a.useState)(!1),ue=Object(i.a)(ie,2),le=ue[0],oe=ue[1],de=Object(a.useState)(!1),je=Object(i.a)(de,2),be=je[0],he=je[1],me=Object(a.useState)(!1),pe=Object(i.a)(me,2),fe=pe[0],xe=pe[1],Oe=Object(a.useState)(0),ve=Object(i.a)(Oe,2),ye=ve[0],Ce=ve[1],ge=Object(a.useState)(""),we=Object(i.a)(ge,2),ke=we[0],Ae=we[1];function Ne(){xe(!0),function(e,t,n,a){if(!n)return Promise.resolve(0);var r=z[t].address;return new e.eth.Contract(Y,r).methods.allowance(n,a).call()}(n,v,r,U).then((function(e){_(BigInt(e)),xe(!1)}),V)}if(Object(a.useEffect)((function(){Ne(),Ae("".concat(Math.pow(10,z[v].decimal)))}),[v,r]),t=function(){(function(e){return D.apply(this,arguments)})(e).then(l,V)},Object(a.useEffect)(t,[]),!u)return Object(S.jsx)("div",{children:"You are not on chain!"});var Te=null!==ce&&ce.some((function(e){return null===e.amount})),Be=""===W&&Te,Se=null!==ce&&!Be;return Object(S.jsxs)(j.a,{className:"mt-4",children:[Object(S.jsx)(b.a,{className:"justify-content-end",children:r}),Object(S.jsx)(b.a,{className:"justify-content-center",children:Object(S.jsx)("h1",{children:"Airdrop"})}),Object(S.jsx)(b.a,{className:"justify-content-center mt-3",children:Object(S.jsxs)(A.a,{hasValidation:!0,children:[Object(S.jsx)(k.a.Control,{as:"textarea",className:"Home__Addresses",onChange:function(e){return se(function(e){var t=[],n=null;return e.replaceAll(","," ").replaceAll("\n"," ").replaceAll('"',"").replaceAll("'","").replaceAll("`","").replaceAll(/  */g," ").trim().toLowerCase().split(" ").every((function(e){if(e.startsWith("0x"))n=new F(e,null),t.push(n);else{if(!P(e))return!1;if(null===n||null!==n.amount)return!1;n.amount=BigInt(e)}return!0}))?t:null}(e.currentTarget.value))},isInvalid:null===ce}),Object(S.jsx)(k.a.Control.Feedback,{type:"invalid",children:"Please provide valid addresses with/without amount."})]})}),Object(S.jsxs)(b.a,{className:"justify-content-center mt-3",children:[Object(S.jsx)(d.a,{xs:"auto",children:Object(S.jsx)(w.a,{children:z.map((function(e){var t=e.id,n=e.name;return Object(S.jsx)(B.a,{id:"token-".concat(t),name:"tokens-radio",type:"radio",variant:"outline-primary",value:t,checked:v===t,onChange:function(e){return C(Number(e.currentTarget.value))},children:n},t)}))})}),Object(S.jsxs)(d.a,{xs:"auto",className:"d-flex align-items-center",children:[Object(S.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(fe?"":"d-none")}),Object(S.jsxs)("p",{className:"m-0",children:["Allownance amount: \xa0",String(E/BigInt(ke)),"\xa0(",String(E),", decimal:\xa0",z[v].decimal,")\xa0",z[v].address]})]}),Object(S.jsx)("div",{className:"w-100"}),Object(S.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(A.a.Text,{children:"Approve amount"}),Object(S.jsx)(k.a.Control,{value:X,placeholder:"amount",onChange:function(e){return q(e.currentTarget.value,Z)}})]})}),Object(S.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(S.jsxs)(A.a,{hasValidation:!0,children:[Object(S.jsx)(A.a.Text,{children:"Default amount"}),Object(S.jsx)(k.a.Control,{value:W,placeholder:"amount",onChange:function(e){return q(e.currentTarget.value,G)},isInvalid:Be}),Object(S.jsx)(k.a.Control.Feedback,{type:"invalid",children:"Please provide amount for default."})]})}),Object(S.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(A.a.Text,{children:"Addresses per transaction"}),Object(S.jsx)(k.a.Control,{value:te,placeholder:"addresses number",onChange:function(e){return q(e.currentTarget.value,ne)}})]})}),Object(S.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(A.a.Text,{children:"Amount unit"}),Object(S.jsx)(k.a.Control,{value:ke,placeholder:"unit",onChange:function(e){return q(e.currentTarget.value,Ae)}})]})}),Object(S.jsx)(d.a,{xs:"auto",className:"mt-3",children:Object(S.jsxs)(o.a,{onClick:Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.prev=1,e.next=4,J(n,v,r,U,BigInt(X),BigInt(ke));case 4:return e.prev=4,oe(!1),e.finish(4);case 7:Ne();case 8:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),disabled:""===X||le,children:[Object(S.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(le?"":"d-none")}),"Approve"]})}),Object(S.jsx)(d.a,{xs:"auto",className:"mt-3",children:Object(S.jsxs)(o.a,{variant:"success",onClick:Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(0),he(!0),e.prev=2,e.next=5,H(n,v,r,ce,BigInt(W),BigInt(ke),Ce,Number(te));case 5:return e.prev=5,he(!1),e.finish(5);case 8:Ne();case 9:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),disabled:!Se||be,children:[Object(S.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(be?"":"d-none")}),"Airdrop",Object(S.jsxs)("span",{className:be?"":"d-none",children:["\xa0",ye,"/",null===ce||void 0===ce?void 0:ce.length]})]})})]}),Object(S.jsx)(b.a,{className:"mt-3",children:Object(S.jsx)(d.a,{children:Object(S.jsxs)(T.a,{children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Address"}),Object(S.jsx)("th",{children:"Amount"})]})}),Object(S.jsx)("tbody",{children:ce?ce.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.address}),Object(S.jsx)("td",{className:e.amount?"":"text-secondary",children:e.amount?e.amount:"default"})]})})):[]})]})})})]})}var W=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),u=s[0],p=s[1];l()().then((function(e){r(e)}),(function(){}));var f=Object(a.useCallback)((function(){n&&p(n.selectedAddress)}),[n]);return Object(a.useEffect)((function(){n&&n.request({method:"eth_accounts"}).then(f,(function(){}))}),[n,f]),n?u?Object(S.jsx)(h.Provider,{value:n,children:Object(S.jsx)(m.Provider,{value:u,children:Object(S.jsx)(L,{})})}):Object(S.jsxs)(j.a,{children:[Object(S.jsx)(b.a,{className:"justify-content-center",children:Object(S.jsx)(d.a,{xs:"auto",children:"You must connect to MetaMask to use Celestial dashboard!"})}),Object(S.jsx)(b.a,{className:"justify-content-center",children:Object(S.jsx)(d.a,{xs:"auto",children:Object(S.jsx)(o.a,{onClick:function(){n&&n.request({method:"eth_requestAccounts"}).then(f,(function(){}))},children:"Connect"})})})]}):Object(S.jsx)("div",{children:"You must installed MetaMask to use Celestial dashboard!"})};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(W,{})}),document.getElementById("root"))}},[[531,1,2]]]);
//# sourceMappingURL=main.132931be.chunk.js.map