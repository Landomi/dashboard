(this["webpackJsonpcelestial-dashboard-frontend"]=this["webpackJsonpcelestial-dashboard-frontend"]||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){},236:function(e,t,n){},250:function(e,t){},252:function(e,t){},254:function(e,t){},258:function(e,t){},285:function(e,t){},287:function(e,t){},296:function(e,t){},298:function(e,t){},308:function(e,t){},310:function(e,t){},428:function(e,t){},430:function(e,t){},437:function(e,t){},438:function(e,t){},531:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(220),s=n.n(c),i=(n(233),n(17)),u=(n(234),n(221)),o=n.n(u),l=n(50),d=n(22),j=n(90),b=n(34),h=Object(a.createContext)(null),m=Object(a.createContext)(null);var f=n(21),p=n.n(f),O=n(8),x=n(75),v=(n(236),n(222)),y=n.n(v),C=n(63),g=n.n(C),w=n(224),k=n(40),A=n(32),N=n(92),T=n(226),S=n(225),B=n(0),I=4902,E="0x42";function M(e){return D.apply(this,arguments)}function D(){return(D=Object(x.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.request({method:"wallet_switchEthereumChain",params:[{chainId:E}]});case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),n=e.t0,(a=n.code)===I){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function _(){return(_=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(!(n=e.sent)||n===I){e.next=5;break}return e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,t.request({method:"wallet_addEthereumChain",params:[{chainId:E,chainName:"OKExChain Mainnet",nativeCurrency:{name:"OKT",symbol:"OKT",decimals:18},rpcUrls:["https://exchainrpc.okex.org"],blockExplorerUrls:["https://www.oklink.com/okexchain"]}]});case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(5),e.abrupt("return",!1);case 13:return e.next=15,M(t);case 15:return e.abrupt("return",!e.sent);case 16:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function P(e){try{var t=BigInt(e);if(String(t)===e&&t>0)return t}catch(n){}return null}function F(e,t){""!==e&&null===P(e)||t(e)}var q=function e(t,n){Object(O.a)(this,e),this.address=void 0,this.amount=void 0,this.address=t,this.amount=n};var L=[{id:0,name:"Celt",address:"0x5Ab622494AB7C5e81911558c9552DBd517F403fb",decimal:18},{id:1,name:"Crystal",address:"0xBD87c06D865a3717A16041aCD8d33922e60E85CE",decimal:18},{id:2,name:"CeltChest",address:"0x777c5a7152F999B4bBC26295C65a0ACb066f75e9",decimal:0}],z=[{inputs:[{internalType:"address",name:"erc20Token",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"airDropBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20Token",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],name:"airDropIndividual",outputs:[],stateMutability:"nonpayable",type:"function"}],K=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function Y(e,t,n,a,r,c){if(!n)return Promise.resolve();var s=L[t].address;return new e.eth.Contract(K,s).methods.approve(a,r*c).send({from:n})}var J="0x074101c52ea69D66577057ECA07147bcF7B3f057";function U(){}function V(e,t,n,a,r,c,s,i){if(!n||!a)return Promise.resolve();var u=L[t].address,o=new e.eth.Contract(z,J),l=Array.from(a.filter((function(e){return null===e.amount})),(function(e){return e.address})),d=Array.from(a.filter((function(e){return null!==e.amount})),(function(e){return e.address})),j=Array.from(a.filter((function(e){return null!==e.amount})),(function(e){return e.amount})),b=[],h=0;if(0!==l.length)for(var m=function(e){var t=l.slice(e,e+i);b.push(o.methods.airDropBatch(u,t,r*c).send({from:n}).then((function(){h+=t.length,s(h)})))},f=0;f<l.length;f+=i)m(f);if(0!==d.length)for(var p=function(e){var t=d.slice(e,e+i),a=j.slice(e,e+i).map((function(e){return g()(e),e*c}));b.push(o.methods.airDropIndividual(u,t,a).send({from:n}).then((function(){h+=t.length,s(h)})))},O=0;O<d.length;O+=i)p(O);return Promise.all(b).then(U)}function H(){var e=Object(a.useContext)(h);g()(e);var t,n=new y.a(e),r=Object(a.useContext)(m),c=Object(a.useState)(!1),s=Object(i.a)(c,2),u=s[0],o=s[1],f=Object(a.useState)(0),O=Object(i.a)(f,2),v=O[0],C=O[1],I=Object(a.useState)(BigInt(0)),E=Object(i.a)(I,2),M=E[0],D=E[1],z=Object(a.useState)(""),H=Object(i.a)(z,2),W=H[0],G=H[1],Q=Object(a.useState)(""),R=Object(i.a)(Q,2),X=R[0],Z=R[1],$=Object(a.useState)("200"),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),re=Object(i.a)(ae,2),ce=re[0],se=re[1],ie=Object(a.useState)(!1),ue=Object(i.a)(ie,2),oe=ue[0],le=ue[1],de=Object(a.useState)(!1),je=Object(i.a)(de,2),be=je[0],he=je[1],me=Object(a.useState)(!1),fe=Object(i.a)(me,2),pe=fe[0],Oe=fe[1],xe=Object(a.useState)(0),ve=Object(i.a)(xe,2),ye=ve[0],Ce=ve[1],ge=Object(a.useState)(""),we=Object(i.a)(ge,2),ke=we[0],Ae=we[1];function Ne(){Oe(!0),function(e,t,n,a){if(!n)return Promise.resolve(0);var r=L[t].address;return new e.eth.Contract(K,r).methods.allowance(n,a).call()}(n,v,r,J).then((function(e){D(BigInt(e)),Oe(!1)}),U)}if(Object(a.useEffect)((function(){Ne(),Ae("".concat(Math.pow(10,L[v].decimal)))}),[v,r]),t=function(){(function(e){return _.apply(this,arguments)})(e).then(o,U)},Object(a.useEffect)(t,[]),!u)return Object(B.jsx)("div",{children:"You are not on chain!"});var Te=null!==ce&&ce.some((function(e){return null===e.amount})),Se=""===W&&Te,Be=null!==ce&&!Se;return Object(B.jsxs)(j.a,{className:"mt-4",children:[Object(B.jsx)(b.a,{className:"justify-content-end",children:r}),Object(B.jsx)(b.a,{className:"justify-content-center",children:Object(B.jsx)("h1",{children:"Airdrop"})}),Object(B.jsx)(b.a,{className:"justify-content-center mt-3",children:Object(B.jsxs)(A.a,{hasValidation:!0,children:[Object(B.jsx)(k.a.Control,{as:"textarea",className:"Home__Addresses",onChange:function(e){return se(function(e){var t=[],n=null;return e.replaceAll(","," ").replaceAll("\n"," ").replaceAll('"',"").replaceAll("'","").replaceAll("`","").replaceAll(/  */g," ").trim().toLowerCase().split(" ").every((function(e){if(e.startsWith("0x"))n=new q(e,null),t.push(n);else{if(!P(e))return!1;if(null===n||null!==n.amount)return!1;n.amount=BigInt(e)}return!0}))?t:null}(e.currentTarget.value))},isInvalid:null===ce}),Object(B.jsx)(k.a.Control.Feedback,{type:"invalid",children:"Please provide valid addresses with/without amount."})]})}),Object(B.jsxs)(b.a,{className:"justify-content-center mt-3",children:[Object(B.jsx)(d.a,{xs:"auto",children:Object(B.jsx)(w.a,{children:L.map((function(e){var t=e.id,n=e.name;return Object(B.jsx)(S.a,{id:"token-".concat(t),name:"tokens-radio",type:"radio",variant:"outline-primary",value:t,checked:v===t,onChange:function(e){return C(Number(e.currentTarget.value))},children:n},t)}))})}),Object(B.jsxs)(d.a,{xs:"auto",className:"d-flex align-items-center",children:[Object(B.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(pe?"":"d-none")}),Object(B.jsxs)("p",{className:"m-0",children:["Allownance amount: \xa0",String(M/BigInt(ke)),"\xa0(",String(M),", decimal:\xa0",L[v].decimal,")\xa0",L[v].address]})]}),Object(B.jsx)("div",{className:"w-100"}),Object(B.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)(A.a.Text,{children:"Approve amount"}),Object(B.jsx)(k.a.Control,{value:X,placeholder:"amount",onChange:function(e){return F(e.currentTarget.value,Z)}})]})}),Object(B.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(B.jsxs)(A.a,{hasValidation:!0,children:[Object(B.jsx)(A.a.Text,{children:"Default amount"}),Object(B.jsx)(k.a.Control,{value:W,placeholder:"amount",onChange:function(e){return F(e.currentTarget.value,G)},isInvalid:Se}),Object(B.jsx)(k.a.Control.Feedback,{type:"invalid",children:"Please provide amount for default."})]})}),Object(B.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)(A.a.Text,{children:"Addresses per transaction"}),Object(B.jsx)(k.a.Control,{value:te,placeholder:"addresses number",onChange:function(e){return F(e.currentTarget.value,ne)}})]})}),Object(B.jsx)(d.a,{xs:"12",md:"6",className:"mt-3",children:Object(B.jsxs)(A.a,{children:[Object(B.jsx)(A.a.Text,{children:"Amount unit"}),Object(B.jsx)(k.a.Control,{value:ke,placeholder:"unit",onChange:function(e){return F(e.currentTarget.value,Ae)}})]})}),Object(B.jsx)(d.a,{xs:"auto",className:"mt-3",children:Object(B.jsxs)(l.a,{onClick:Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),e.prev=1,e.next=4,Y(n,v,r,J,BigInt(X),BigInt(ke));case 4:return e.prev=4,le(!1),e.finish(4);case 7:Ne();case 8:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),disabled:""===X||oe,children:[Object(B.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(oe?"":"d-none")}),"Approve"]})}),Object(B.jsx)(d.a,{xs:"auto",className:"mt-3",children:Object(B.jsxs)(l.a,{variant:"success",onClick:Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(0),he(!0),e.prev=2,e.next=5,V(n,v,r,ce,BigInt(W),BigInt(ke),Ce,Number(te));case 5:return e.prev=5,he(!1),e.finish(5);case 8:Ne();case 9:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),disabled:!Be||be,children:[Object(B.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-1 ".concat(be?"":"d-none")}),"Airdrop",Object(B.jsxs)("span",{className:be?"":"d-none",children:["\xa0",ye,"/",null===ce||void 0===ce?void 0:ce.length]})]})})]}),Object(B.jsx)(b.a,{className:"mt-3",children:Object(B.jsx)(d.a,{children:Object(B.jsxs)(T.a,{children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Address"}),Object(B.jsx)("th",{children:"Amount"})]})}),Object(B.jsx)("tbody",{children:ce?ce.map((function(e){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{children:e.address}),Object(B.jsx)("td",{className:e.amount?"":"text-secondary",children:e.amount?e.amount:"default"})]})})):[]})]})})})]})}var W=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),u=s[0],f=s[1],p=Object(a.useState)(!1),O=Object(i.a)(p,2),x=O[0],v=O[1];o()().then((function(e){r(e)}),(function(){})),Object(a.useEffect)((function(){function e(){n&&v(n.isConnected())}return n?(n.on("connect",e),n.on("disconnect",e),e(),function(){n.removeListener("connect",e),n.removeListener("disconnect",e)}):function(){}}),[n]),Object(a.useEffect)((function(){if(!n)return function(){};function e(){n&&f(n.selectedAddress)}return n.on("accountsChanged",e),e(),function(){n.removeListener("accountsChanged",e)}}),[n]);var y=null!==n?n.selectedAddress:null;return y!==u&&f(y),n?x?Object(B.jsx)(h.Provider,{value:n,children:Object(B.jsx)(m.Provider,{value:u,children:Object(B.jsx)(H,{})})}):Object(B.jsxs)(j.a,{children:[Object(B.jsx)(b.a,{className:"justify-content-center",children:Object(B.jsx)(d.a,{xs:"auto",children:"You must connect to MetaMask to use Celestial dashboard!"})}),Object(B.jsx)(b.a,{className:"justify-content-center",children:Object(B.jsx)(d.a,{xs:"auto",children:Object(B.jsx)(l.a,{onClick:function(){n&&n.request({method:"eth_requestAccounts"}).then((function(){v(!0)}),(function(){}))},children:"Connect"})})})]}):Object(B.jsx)("div",{children:"You must installed MetaMask to use Celestial dashboard!"})};s.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(W,{})}),document.getElementById("root"))}},[[531,1,2]]]);
//# sourceMappingURL=main.d8e02228.chunk.js.map